/*! angular-weblogng 15-03-2015 */
!function(a){"use strict";var b=a.module("weblogng",[]);b.provider("$weblogng",function(){return{$get:["$window","weblogngConfig",function(a,b){return new a.weblogng.Logger("api.weblogng.com",b.apiKey,b.options)}]}}).config(function(a,b){a.factory("httpInterceptor",function(a,b,c,d){function e(a){var b;return a&&a.url&&(b=h(a.url),a.method&&(b=a.method+" "+b)),b}function f(a){return a.options.convertRequestConfigToMetricName?a.options.convertRequestConfigToMetricName:e}function g(a){return a&&a.url?h(a.url):void 0}function h(b){var c=a.document.createElement("a");return c.href=b,c.host}return{extractHostFromUrl:h,calculateScope:g,convertRequestConfigToMetricName:e,request:function(c){return c.timer=new a.weblogng.Timer,c.timer.start(),c||b.when(c)},response:function(d){var e=c.get("$weblogng"),h=f(e),i=h(d.config);if(d.config.timer){d.config.timer.finish();var j=a.weblogng.epochTimeInMilliseconds(),k=g(d.config);e.sendMetric(i,d.config.timer.getElapsedTime(),j,k,"http request")}return d||b.when(d)},responseError:function(e){var h=function(a,b){var c,e="unknown";a.config&&(c=a.config.url,e=a.config.method);var f={status:a.status,method:e,url:c,message:b};d.error("http request failed:",f)};if(e&&e.config&&e.config.timer){var i=c.get("$weblogng"),j=f(i),k=j(e.config);e.config.timer.finish();var l=a.weblogng.epochTimeInMilliseconds(),m=g(e.config);i.sendMetric(k,e.config.timer.getElapsedTime(),l,m,"http request")}switch(e.status){case 400:h(e,"server indicates request was malformed");break;case 500:h(e,"server encountered error while processing request");break;default:h(e,"an http error occurred")}return b.reject(e)}}}),b.interceptors.push("httpInterceptor")}).run(function(a,b){a.$on("$routeChangeSuccess",function(a,c){var d=b.get("$weblogng");d.recordEvent("routeChangeSuccess-"+c.loadedTemplateUrl)})})}(angular);